<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>FunGeo</title>
</head>
<body>
    <div class="container">
        <h1>Welcome to FunGeo</h1>
        <p>Choose a topic for study:</p>
        <form action="/select_topic" method="post">
            <label for="topic">Select a Topic:</label>
            <select name="topic" id="topic" required>
                <option value="flags">Flags of countries</option>
                <option value="capital_cities">Capital cities</option>
                <option value="currencies">Currencies of countries</option>
            </select>
            <br><br>

            <input type="checkbox" id="advancedStudy" name="advanced_study"> Advanced Study
            <br><br>

            <div id="complexityOptions" style="display: none;">
                <label for="complexity">Choose Complexity:</label>
                <select name="complexity" id="complexity">
                    <option value="continent">Continent</option>
                    <option value="population">Population Size</option>
                </select>
                <br><br>

                <div id="filterOptions" style="display: none;">
                    <!-- Filter options will be dynamically populated based on the user's choice -->
                </div>
            </div>

            <input type="submit" value="Study">
        </form>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var advancedStudyCheckbox = document.getElementById('advancedStudy');
            var complexityOptions = document.getElementById('complexityOptions');
            var filterOptions = document.getElementById('filterOptions');
    
            advancedStudyCheckbox.addEventListener('change', function () {
                complexityOptions.style.display = this.checked ? 'block' : 'none';
                filterOptions.style.display = 'none';
            });
    
            document.getElementById('complexity').addEventListener('change', function () {
                var complexityValue = this.value;
    
                // Clear existing options
                filterOptions.innerHTML = '';
    
                // Add filter options based on the chosen complexity
                if (complexityValue === 'continent') {
                    var continentOptions = ['Africa', 'Asia', 'Europe', 'North America', 'Oceania', 'South America'];
                    addOptions(filterOptions, 'Select Continent:', continentOptions);
                } else if (complexityValue === 'population') {
                    var populationOptions = ['Up to 100,000', 'Up to 1,000,000', 'Up to 10,000,000'];
                    addOptions(filterOptions, 'Select Population Size:', populationOptions);
                }
    
                // Display the filter options
                filterOptions.style.display = 'block';
            });
    
            function addOptions(selectElement, title, options) {
                var titleLabel = document.createElement('label');
                titleLabel.textContent = title;
                selectElement.appendChild(titleLabel);

                var selectBox = document.createElement('select');
                selectBox.name = 'filterOption';
                selectBox.id = 'filterOption';

                for (var i = 0; i < options.length; i++) {
                    var option = document.createElement('option');
                    option.value = options[i];
                    option.text = options[i];
                    selectBox.appendChild(option);
                }

                selectElement.appendChild(selectBox);
            }
        });
    </script>       
</body>
</html>